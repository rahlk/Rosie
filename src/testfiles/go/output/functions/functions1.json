{"go.functions":{"text":"package main\n\nimport (\n\t\"fmt\"\n\t\"io\"\n\t\"os\"\n\t\"sort\"\n\t\"strconv\"\n\n\t\"github.com\/brentp\/goleft\"\n\t\"github.com\/brentp\/goleft\/covstats\"\n\t\"github.com\/brentp\/goleft\/depth\"\n\t\"github.com\/brentp\/goleft\/depthwed\"\n\t\"github.com\/brentp\/goleft\/indexcov\"\n\t\"github.com\/brentp\/goleft\/indexsplit\"\n\t\"github.com\/brentp\/goleft\/samplename\"\n)\n\ntype progPair struct {\n\thelp string\n\tmain func()\n}\n\nvar progs = map[string]progPair{\n\t\"depth\":      progPair{\"parallelize calls to samtools in user-defined windows\", depth.Main},\n\t\"depthwed\":   progPair{\"matricize output from depth to n-sites * n-samples\", depthwed.Main},\n\t\"covstats\":   progPair{\"coverage stats across bams by sampling\", covstats.Main},\n\t\"indexcov\":   progPair{\"quick coverage estimate using only the bam index\", indexcov.Main},\n\t\"indexsplit\": progPair{\"create regions of even coverage across bams\/crams\", indexsplit.Main},\n\t\"samplename\": progPair{\"report samplename(s) from a bam's SM tag\", samplename.Main},\n}\n\nfunc printProgs() {\n\n\tvar wtr io.Writer = os.Stdout\n\n\tfmt.Fprintf(wtr, \"goleft Version: %s\\n\\n\", goleft.Version)\n\tvar keys []string\n\tl := 5\n\tfor k := range progs {\n\t\tkeys = append(keys, k)\n\t\tif len(k) > l {\n\t\t\tl = len(k)\n\t\t}\n\t}\n\tfmtr := \"%-\" + strconv.Itoa(l) + \"s : %s\\n\"\n\tsort.Strings(keys)\n\tfor _, k := range keys {\n\t\tfmt.Fprintf(wtr, fmtr, k, progs[k].help)\n\n\t}\n\tos.Exit(1)\n\n}\n\nfunc main() {\n\n\tif len(os.Args) < 2 {\n\t\tprintProgs()\n\t}\n\tvar p progPair\n\tvar ok bool\n\tif p, ok = progs[os.Args[1]]; !ok {\n\t\tprintProgs()\n\t}\n\t\/\/ remove the prog name from the call\n\tos.Args = append(os.Args[:1], os.Args[2:]...)\n\tp.main()\n}","pos":1,"subs":[{"go.function":{"text":"func printProgs() ","pos":948,"subs":[{"go.func":{"text":"func ","pos":948}},{"go.function_name":{"text":"printProgs","pos":953}},{"go.parameters":{"text":"()","pos":963,"subs":[{"go.single_param":{"text":"","pos":964}}]}}]}},{"go.function":{"text":"func main() ","pos":1330,"subs":[{"go.func":{"text":"func ","pos":1330}},{"go.function_name":{"text":"main","pos":1335}},{"go.parameters":{"text":"()","pos":1339,"subs":[{"go.single_param":{"text":"","pos":1340}}]}}]}}]}}
