{"java.dependencies":{"text":"package com.jsoniter;\n\nimport com.jsoniter.spi.Decoder;\nimport com.jsoniter.spi.JsoniterSpi;\nimport com.jsoniter.spi.TypeLiteral;\n\nimport java.io.IOException;\nimport java.lang.reflect.Array;\n\nclass ReflectionArrayDecoder implements Decoder {\n\n    private final Class componentType;\n    private final Decoder compTypeDecoder;\n\n    public ReflectionArrayDecoder(Class clazz) {\n        componentType = clazz.getComponentType();\n        compTypeDecoder = Codegen.getDecoder(TypeLiteral.create(componentType).getDecoderCacheKey(), componentType);\n    }\n\n    @Override\n    public Object decode(JsonIterator iter) throws IOException {\n        CodegenAccess.resetExistingObject(iter);\n        if (iter.readNull()) {\n            return null;\n        }\n        if (!CodegenAccess.readArrayStart(iter)) {\n            return Array.newInstance(componentType, 0);\n        }\n        Object a1 = compTypeDecoder.decode(iter);\n        if (CodegenAccess.nextToken(iter) != ',') {\n            Object arr = Array.newInstance(componentType, 1);\n            Array.set(arr, 0, a1);\n            return arr;\n        }\n        Object a2 = compTypeDecoder.decode(iter);\n        if (CodegenAccess.nextToken(iter) != ',') {\n            Object arr = Array.newInstance(componentType, 2);\n            Array.set(arr, 0, a1);\n            Array.set(arr, 1, a2);\n            return arr;\n        }\n        Object a3 = compTypeDecoder.decode(iter);\n        if (CodegenAccess.nextToken(iter) != ',') {\n            Object arr = Array.newInstance(componentType, 3);\n            Array.set(arr, 0, a1);\n            Array.set(arr, 1, a2);\n            Array.set(arr, 2, a3);\n            return arr;\n        }\n        Object a4 = compTypeDecoder.decode(iter);\n        Object arr = Array.newInstance(componentType, 8);\n        Array.set(arr, 0, a1);\n        Array.set(arr, 1, a2);\n        Array.set(arr, 2, a3);\n        Array.set(arr, 3, a4);\n        int i = 4;\n        int arrLen = 8;\n        while (CodegenAccess.nextToken(iter) == ',') {\n            if (i == arrLen) {\n                Object newArr = Array.newInstance(componentType, 2 * arrLen);\n                System.arraycopy(arr, 0, newArr, 0, arrLen);\n                arr = newArr;\n                arrLen = 2 * arrLen;\n            }\n            Array.set(arr, i++, compTypeDecoder.decode(iter));\n        }\n        if (i == arrLen) {\n            return arr;\n        }\n        Object newArr = Array.newInstance(componentType, i);\n        System.arraycopy(arr, 0, newArr, 0, i);\n        return newArr;\n    }\n}\n","subs":[{"java.package":{"text":"package com.jsoniter","subs":[{"java.package_text":{"text":"com.jsoniter","pos":9}}],"pos":1}},{"java.dependency":{"text":"import com.jsoniter.spi.Decoder","subs":[{"java.dependency_text":{"text":"com.jsoniter.spi.Decoder","pos":31}}],"pos":24}},{"java.dependency":{"text":"import com.jsoniter.spi.JsoniterSpi","subs":[{"java.dependency_text":{"text":"com.jsoniter.spi.JsoniterSpi","pos":64}}],"pos":57}},{"java.dependency":{"text":"import com.jsoniter.spi.TypeLiteral","subs":[{"java.dependency_text":{"text":"com.jsoniter.spi.TypeLiteral","pos":101}}],"pos":94}},{"java.dependency":{"text":"import java.io.IOException","subs":[{"java.dependency_text":{"text":"java.io.IOException","pos":139}}],"pos":132}},{"java.dependency":{"text":"import java.lang.reflect.Array","subs":[{"java.dependency_text":{"text":"java.lang.reflect.Array","pos":167}}],"pos":160}}],"pos":1}}
